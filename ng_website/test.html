<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模型市场 - 解决外部图片403错误</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .description {
            max-width: 800px;
            margin: 0 auto 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .problem {
            background: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .solution {
            background: #e8f5e9;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .models-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .model-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .model-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .model-image {
            position: relative;
            height: 200px;
            background-color: #eee;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .model-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .model-image .loading-icon {
            font-size: 3rem;
            color: #aaa;
            animation: spin 1.5s linear infinite;
        }
        
        .model-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #4CAF50;
            color: white;
            padding: 5px 15px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 0.85rem;
            z-index: 2;
        }
        
        .model-info {
            padding: 20px;
        }
        
        .model-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #2c3e50;
            font-weight: 600;
            min-height: 44px;
        }
        
        .model-author {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .author-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #3498db;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .author-name {
            font-size: 1rem;
            color: #7f8c8d;
        }
        
        .model-stats {
            display: flex;
            justify-content: space-around;
        }
        
        .stats-item {
            text-align: center;
        }
        
        .stats-value {
            font-weight: bold;
            font-size: 1.1rem;
            color: #2c3e50;
        }
        
        .stats-label {
            font-size: 0.85rem;
            color: #95a5a6;
        }
        
        .section-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin: 30px 0 20px;
            text-align: center;
            position: relative;
        }
        
        .section-title:after {
            content: "";
            display: block;
            width: 60px;
            height: 3px;
            background: #3498db;
            margin: 10px auto 0;
            border-radius: 30px;
        }
        
        .code-section {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 25px;
            border-radius: 10px;
            margin: 30px auto;
            max-width: 800px;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
        }
        
        .note {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .solved-status {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .solved {
            background: #e8f5e9;
            color: #4CAF50;
            border: 1px solid #4CAF50;
        }
        
        .unsolved {
            background: #ffebee;
            color: #f44336;
            border: 1px solid #f44336;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .models-container {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>AI模型市场</h1>
        <p>浏览、发现和获取优秀的AI模型</p>
    </div>
    
    <div class="description">
        <h2>外部图片403错误问题</h2>
        <div class="problem">
            <p><strong>问题描述：</strong>当从第三方网站加载图片时，服务器返回403 Forbidden错误，图片无法正常显示。</p>
            <p><strong>原因：</strong>这是因为第三方服务器启用了防盗链机制，拒绝来自其他网站的图片请求。</p>
        </div>
        
        <div class="solution">
            <p><strong>解决方案：</strong>在动态创建img元素时，添加referrerpolicy="no-referrer"属性，避免发送Referer请求头。</p>
            <p>请参考下方修改后的模板代码和JavaScript实现方式。</p>
        </div>
    </div>
    
    <h2 class="section-title">模型展示</h2>
    <div id="models-grid" class="models-container">
        <!-- 模型卡片将通过JavaScript动态加载 -->
    </div>
    
    <h2 class="section-title">修改后的模板代码</h2>
    <div class="code-section">
<pre><code>&lt;template id="model-card-template"&gt;
    &lt;div class="model-card"&gt;
        &lt;div class="model-image"&gt;
            <span style="color: #4CAF50">&lt;!-- 关键修改：添加referrerpolicy属性 --&gt;
            &lt;img <strong>referrerpolicy="no-referrer"</strong> alt="模型预览"&gt;</span>
            &lt;div class="model-badge"&gt;可商用&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="model-info"&gt;
            &lt;h3 class="model-title"&gt;&lt;/h3&gt;
            &lt;div class="model-author"&gt;
                &lt;div class="author-avatar"&gt;&lt;/div&gt;
                &lt;span class="author-name"&gt;&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class="model-stats"&gt;
                &lt;span class="downloads"&gt;&lt;/span&gt;
                &lt;span class="likes"&gt;&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;</code></pre>
    </div>
    
    <h2 class="section-title">JavaScript实现</h2>
    <div class="code-section">
<pre><code>// 模拟模型数据（实际应用中可能来自API）
const modelData = [
  {
    id: 1,
    title: "ChatGPT 语言模型",
    imageUrl: "https://images.unsplash.com/photo-1621569642780-4864752e847e",
    author: "OpenAI",
    downloads: "12.4K",
    likes: "8.2K"
  },
  {
    id: 2,
    title: "Stable Diffusion 图像生成",
    imageUrl: "https://images.unsplash.com/photo-1635490845185-1e31d1a27b8a",
    author: "StabilityAI",
    downloads: "34.8K",
    likes: "15.6K"
  },
  {
    id: 3,
    title: "DALL·E 创意图像生成",
    imageUrl: "https://images.unsplash.com/photo-1635070041078-e363d1ce7387",
    author: "OpenAI",
    downloads: "28.9K",
    likes: "17.2K"
  }
];

// 获取模板和容器
const template = document.getElementById('model-card-template');
const container = document.getElementById('models-grid');

// 使用模板创建模型卡片
modelData.forEach(model => {
  // 克隆模板内容
  const clone = document.importNode(template.content, true);
  
  // 设置模型信息
  const card = clone.querySelector('.model-card');
  const title = clone.querySelector('.model-title');
  const img = clone.querySelector('img');
  const authorAvatar = clone.querySelector('.author-avatar');
  const authorName = clone.querySelector('.author-name');
  const downloads = clone.querySelector('.downloads');
  const likes = clone.querySelector('.likes');
  
  // 设置图片URL并解决403问题
  img.src = `${model.imageUrl}?auto=format&fit=crop&w=600&h=400&q=80`;
  
  title.textContent = model.title;
  authorAvatar.textContent = model.author.charAt(0);
  authorName.textContent = model.author;
  downloads.innerHTML = `&lt;span class="stats-value"&gt;${model.downloads}&lt;/span&gt;&lt;br&gt;&lt;span class="stats-label"&gt;下载&lt;/span&gt;`;
  likes.innerHTML = `&lt;span class="stats-value"&gt;${model.likes}&lt;/span&gt;&lt;br&gt;&lt;span class="stats-label"&gt;收藏&lt;/span&gt;`;
  
  // 添加到容器
  container.appendChild(clone);
});</code></pre>
    </div>
    
    <div class="note">
        <h3>重要提示：</h3>
        <ul>
            <li>在动态创建img元素或设置img.src时，务必添加referrerpolicy="no-referrer"属性</li>
            <li>如果图片来自不同域名的资源，确保您有权使用这些图片</li>
            <li>在商业项目中，建议使用合法获取的图片资源或官方API</li>
            <li>此解决方案兼容所有现代浏览器(Chrome、Firefox、Safari、Edge等)</li>
        </ul>
    </div>
    
    <script>
        // 这里是实际JS实现代码
        document.addEventListener('DOMContentLoaded', function() {
            // 模拟模型数据（实际应用中可能来自API）
            const modelData = [
                {
                    id: 1,
                    title: "ChatGPT 语言模型",
                    imageUrl: "https://liblibai-online.liblib.cloud/img/f972b08efd6e4070a74b7ffe85e8a28f/dabf74857c5e92ada8f08d5d476f74a309c3fa1c1885b78714166e24d52b1f24.jpg",
                    author: "OpenAI",
                    downloads: "12.4K",
                    likes: "8.2K"
                },
                {
                    id: 2,
                    title: "Stable Diffusion 图像生成",
                    imageUrl: "https://images.unsplash.com/photo-1635490845185-1e31d1a27b8a",
                    author: "StabilityAI",
                    downloads: "34.8K",
                    likes: "15.6K"
                },
                {
                    id: 3,
                    title: "DALL·E 创意图像生成",
                    imageUrl: "https://images.unsplash.com/photo-1635070041078-e363d1ce7387",
                    author: "OpenAI",
                    downloads: "28.9K",
                    likes: "17.2K"
                },
                {
                    id: 4,
                    title: "MidJourney 艺术创作",
                    imageUrl: "https://images.unsplash.com/photo-1639762681057-408e52192e54",
                    author: "MidJourney",
                    downloads: "41.3K",
                    likes: "23.7K"
                },
                {
                    id: 5,
                    title: "Whisper 语音识别",
                    imageUrl: "https://images.unsplash.com/photo-1634142741460-35e35fc83ecd",
                    author: "OpenAI",
                    downloads: "16.5K",
                    likes: "9.8K"
                },
                {
                    id: 6,
                    title: "BERT 自然语言理解",
                    imageUrl: "https://liblibai-online.liblib.cloud/img/512db55f75114e88885efdd5974208e1/cdc400ffe7c1fc8613b14b9ee606407237d2e5e7a9d06a9ba2d70961cae32320.jpg",
                    author: "Google",
                    downloads: "23.1K",
                    likes: "11.4K"
                }
            ];

            // 获取容器
            const container = document.getElementById('models-grid');

            // 为每个模型创建卡片
            modelData.forEach(model => {
                const card = document.createElement('div');
                card.className = 'model-card';
                
                // 添加解决标记
                const status = document.createElement('div');
                status.className = 'solved solved-status';
                status.textContent = '已解决403问题';
                card.appendChild(status);
                
                card.innerHTML = `
                    <div class="model-image">
                        <img src="${model.imageUrl}?auto=format&fit=crop&w=600&h=400&q=80" 
                             alt="${model.title}" 
                             referrerpolicy="no-referrer">
                        <div class="model-badge">可商用</div>
                    </div>
                    <div class="model-info">
                        <h3 class="model-title">${model.title}</h3>
                        <div class="model-author">
                            <div class="author-avatar">${model.author.charAt(0)}</div>
                            <span class="author-name">${model.author}</span>
                        </div>
                        <div class="model-stats">
                            <div class="stats-item">
                                <div class="stats-value">${model.downloads}</div>
                                <div class="stats-label">下载</div>
                            </div>
                            <div class="stats-item">
                                <div class="stats-value">${model.likes}</div>
                                <div class="stats-label">收藏</div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        });
    </script>
</body>
</html>